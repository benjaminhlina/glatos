<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Residence Index • glatos</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Residence Index">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">glatos</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.0.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/data_loading.html">Data loading methods for the R package glatos</a>
    </li>
    <li>
      <a href="../articles/data_requirements.html">Data requirements of the R package glatos</a>
    </li>
    <li>
      <a href="../articles/receiver_efficiency.html">Receiver Efficiency Index</a>
    </li>
    <li>
      <a href="../articles/residence_index.html">Residence Index</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><script src="residence_index_files/htmlwidgets-1.2/htmlwidgets.js"></script><script src="residence_index_files/plotly-binding-4.8.0/plotly.js"></script><script src="residence_index_files/typedarray-0.1/typedarray.min.js"></script><script src="residence_index_files/jquery-1.11.3/jquery.min.js"></script><link href="residence_index_files/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet">
<script src="residence_index_files/crosstalk-1.0.0/js/crosstalk.min.js"></script><link href="residence_index_files/plotly-htmlwidgets-css-1.39.2/plotly-htmlwidgets.css" rel="stylesheet">
<script src="residence_index_files/plotly-main-1.39.2/plotly-latest.min.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Residence Index</h1>
            
            <h4 class="date">Updated: 2019-02-18</h4>
      
      
      <div class="hidden name"><code>residence_index.Rmd</code></div>

    </div>

    
    

<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>The <code>residence_index</code> function in the R package <em>glatos</em> calculates the relative amount of time that a tagged animal (or animals) occupied each of a set of discrete locations monitored by receivers. Among locations in a detection dataset, the derivation of the residency index (RI) value for each location <em>k</em> seems simple at first glance: <span class="math display">\[RI_{k} = \frac{t_{k}}{T}\text{,}\]</span> where <span class="math inline">\(t_{k}\)</span> is the amount of time spent at location <em>k</em> and <span class="math inline">\(T = \sum_{k=1}^{K}{t_k}\)</span> is the total amount of time spent among any of all <em>K</em> locations. In practice, there are numerous ways to calculate <span class="math inline">\(t_{k}\)</span> and thus, seemingly endless flavors of RI exist (much like other ecological indices). <code>residence_index</code> provides five different calculation methods for RI. Each method has either been previously described in scientific literature (e.g., the “Kessel” method<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>) or represents what we theorize as appropriate methods for certain situations (array designs, questions, etc.). However, these methods have only recently been developed and are still being evaluated. With any of the above methods, use of RI to address specific questions or test hypotheses about animal space use will further require assumptions and data manipulation. For example, when a dataset contains detections of multiple tagged animals, it may be prudent to use the mean RI (<span class="math inline">\(\bar{RI}_k\)</span>) among individuals, which requires calculating RI for each individual separately. Similarly, one might seek to compare <span class="math inline">\(\bar{RI}_k\)</span> among groups of animals (e.g., by age, sex) or time periods. Examples in this vignette are intended to briefly introduce methods that may be useful for such manipulations and also for summarizing and exploring RI with graphs and maps.</p>
<div id="function-overview" class="section level2">
<h2 class="hasAnchor">
<a href="#function-overview" class="anchor"></a>Function overview</h2>
<p>The <em>residence_index</em> function will take a condensed detection event dataframe (in the form returned by the <em>glatos</em> function <em>detection_events</em> with argument <code>condensed = TRUE</code>) and return a data frame with <span class="math inline">\(RI_k\)</span>, <span class="math inline">\(t_k\)</span> (in days), and <span class="math inline">\(t_K\)</span> (in days) for each location in columns named <em>residency_index</em>, <em>detected_days</em>, and <em>total_days</em>, respectively. Latitude and longitude of each unique <em>location</em> are also summarized and returned in columns named <em>mean_latitude</em> and <em>mean_longitude</em>.</p>
</div>
<div id="calculation-methods" class="section level2">
<h2 class="hasAnchor">
<a href="#calculation-methods" class="anchor"></a>Calculation methods</h2>
<p>The <code>calculation_method</code> argument is used to specify the method used to calculate RI and its components. Currently, five methods are avaiable, which differ principally by the way they calculate the amount of time detected:</p>
<ul>
<li><dl>
<dt><strong>kessel</strong></dt>
<dd>counts discrete calendar days
</dd>
</dl></li>
<li><dl>
<dt><strong>time_interval</strong></dt>
<dd>counts discrete time intervals of user-specified size (e.g., 1 day, 2 weeks, etc.); interval size is set by argument <code>time_interval_size</code>
</dd>
</dl></li>
<li><dl>
<dt><strong>timediff</strong></dt>
<dd>calculates total duration between first detection of first event and last detection of last event within each location (or group)
</dd>
</dl></li>
<li><dl>
<dt><strong>aggregate_no_overlap</strong></dt>
<dd>calculates total duration among all detection events but does not “double count” any overlapping events
</dd>
</dl></li>
<li><dl>
<dt><strong>aggregate_with_overlap</strong></dt>
<dd>calculates total duration among all detection events but counts all events separately
</dd>
</dl></li>
</ul>
</div>
<div id="defining-locations" class="section level2">
<h2 class="hasAnchor">
<a href="#defining-locations" class="anchor"></a>Defining locations</h2>
<p>By default, RI calculations and results (which also include mean latitude and longitude for each unique location) are limited to the set of locations present in the input data frame and will not include locations where no animals were detected. To include sites with no detections, a set of locations can be specified in a data frame via the <code>locations</code> argument.</p>
</div>
<div id="other-grouping-variables" class="section level2">
<h2 class="hasAnchor">
<a href="#other-grouping-variables" class="anchor"></a>Other grouping variables</h2>
<p>RI is always calculated separately for each unique value of in the <em>location</em> column of the input detection data or optional <code>locations</code> data frame, but one or more additional grouping columns can be specified using the <code>group_col</code> argument. By default, <code>group_col = "animal_id"</code>, so RI will be calculated for each animal at each location. If <code>group_col = NULL</code>, then the <em>animal_id</em> column (an all other columns except <em>location</em>) will be ignored.</p>
</div>
<div id="accounting-for-groups-in-total-time" class="section level2">
<h2 class="hasAnchor">
<a href="#accounting-for-groups-in-total-time" class="anchor"></a>Accounting for groups in total time</h2>
<p>By default (when argument <code>groupwise_total = FALSE</code>), the denominator of the RI calculation (representing total time detected) will ignore grouping variables specified in <code>group_col</code> such that for group <em>i</em> at location <em>k</em> <span class="math display">\[RI_{k,i} = \frac{t_{k,i}}{\sum_{k=1}^Kt_k}\text{.}\]</span> For example when <code>group_col = "animal_id"</code>, <span class="math inline">\(RI_{k,i}\)</span> for each animal represents the time that a particular animal <em>i</em> spent at location <em>k</em> as a proportion of time that <em>all animals</em> spent at all locations. Conversely, if <code>groupwise_total = TRUE</code>, then total time will represent the proportion of time that <em>only the </em>i<em>th animal</em> spent at all locations, such that <span class="math display">\[RI_{k,i} = \frac{t_{k,i}}{\sum_{k=1}^Kt_{k,i}}\text{.}\]</span></p>

</div>
</div>
<div id="examples" class="section level1">
<h1 class="hasAnchor">
<a href="#examples" class="anchor"></a>Examples</h1>
<p>This section includes simple examples of each of the five calculation methods using example walleye data and mostly-default input arguments. Results are displayed as simple bubble plots (maps) in this section, because it is generic and effective–not because it is our preferred or recommended method. More capable and user-friendly plotting methods, including the purpose-built <em>ri_plot</em> function, will be briefly introduced in another section, but for the most part we expect users to use a wide variety of plotting methods depending on their particular goals and preferences.</p>
<div id="getting-started" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-started" class="anchor"></a>Getting started</h2>
<div id="importing-libraries" class="section level3">
<h3 class="hasAnchor">
<a href="#importing-libraries" class="anchor"></a>Importing Libraries</h3>
<p>Import <code>glatos</code> an <code>dplyr</code>. We’ll use <code>dplyr</code> for summarizing results and <code>sp</code> for mapping spatial objects.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(glatos)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(dplyr)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(sp)</a></code></pre></div>
</div>
<div id="importing-and-compressing-data" class="section level3">
<h3 class="hasAnchor">
<a href="#importing-and-compressing-data" class="anchor"></a>Importing and compressing data</h3>
<p>We will import the sample walleye detection data using <code><a href="../reference/read_glatos_detections.html">glatos::read_glatos_detections()</a></code>.</p>
<p>Note that <code>system.file</code> is only used here because we need to get the path to the example data file that’s bundled with the <em>glatos</em> package. To run a different file from another location, skip this function and just set <code>det_file</code> to the path of your own file (e.g., <code>det_file &lt;- "C:/your_files/your_detections.csv"</code>).</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">det_file &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="st">"extdata"</span>, <span class="st">"walleye_detections.csv"</span>,</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">                        <span class="dt">package =</span> <span class="st">"glatos"</span>)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"></a>
<a class="sourceLine" id="cb2-4" data-line-number="4">detections &lt;-<span class="st"> </span><span class="kw"><a href="../reference/read_glatos_detections.html">read_glatos_detections</a></span>(det_file)</a></code></pre></div>
<p>Next, we compress the detections into detection events using <code><a href="../reference/detection_events.html">glatos::detection_events()</a></code> and include the time-based event separator (argument <code>time_sep</code>) of 3600 seconds (one hour). This means that events will not contain a time gap (at the same location) exceeding one hour. Note that the other arguments are not shown below because we are using default values, which means the detection events will be grouped on the <em>glatos_array</em> column (<code>location_col</code> argument). Finally, the events are in “condensed” (i.e., “compressed”) form, meaning there is one row for each event, including <em>first_detection</em> and <em>last_detection</em> timestamps.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">det_events &lt;-<span class="st"> </span>glatos<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/glatos/topics/detection_events">detection_events</a></span>(detections, <span class="dt">time_sep =</span> <span class="st">"3600"</span>)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">The event filter distilled <span class="dv">7180</span> detections down to <span class="dv">2507</span> distinct detection events.</a></code></pre></div>
<p>Note the structure below. <em>residence_index</em> requires a file with this structure.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(det_events)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">  event animal_id location mean_latitude mean_longitude</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="dv">1</span>     <span class="dv">1</span>       <span class="dv">153</span>      TTB      <span class="fl">43.39165</span>      <span class="fl">-83.99264</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="dv">2</span>     <span class="dv">2</span>       <span class="dv">153</span>      TTB      <span class="fl">43.38962</span>      <span class="fl">-83.99030</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="dv">3</span>     <span class="dv">3</span>       <span class="dv">153</span>      SGR      <span class="fl">43.60963</span>      <span class="fl">-83.88658</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="dv">4</span>     <span class="dv">4</span>       <span class="dv">153</span>      SGR      <span class="fl">43.60963</span>      <span class="fl">-83.88658</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="dv">5</span>     <span class="dv">5</span>       <span class="dv">153</span>      SGR      <span class="fl">43.60963</span>      <span class="fl">-83.88658</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="dv">6</span>     <span class="dv">6</span>       <span class="dv">153</span>      SGR      <span class="fl">43.60963</span>      <span class="fl">-83.88658</span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9">      first_detection      last_detection num_detections res_time_sec</a>
<a class="sourceLine" id="cb4-10" data-line-number="10"><span class="dv">1</span> <span class="dv">2012-04-29</span> <span class="dv">01</span><span class="op">:</span><span class="dv">48</span><span class="op">:</span><span class="dv">37</span> <span class="dv">2012-04-29</span> <span class="dv">01</span><span class="op">:</span><span class="dv">55</span><span class="op">:</span><span class="dv">12</span>              <span class="dv">3</span>          <span class="dv">395</span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11"><span class="dv">2</span> <span class="dv">2012-04-29</span> <span class="dv">01</span><span class="op">:</span><span class="dv">56</span><span class="op">:</span><span class="dv">42</span> <span class="dv">2012-04-29</span> <span class="dv">02</span><span class="op">:</span><span class="dv">26</span><span class="op">:</span><span class="dv">07</span>             <span class="dv">18</span>         <span class="dv">1765</span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12"><span class="dv">3</span> <span class="dv">2012-04-30</span> <span class="dv">04</span><span class="op">:</span><span class="dv">46</span><span class="op">:</span><span class="dv">40</span> <span class="dv">2012-04-30</span> <span class="dv">04</span><span class="op">:</span><span class="dv">46</span><span class="op">:</span><span class="dv">40</span>              <span class="dv">1</span>            <span class="dv">0</span></a>
<a class="sourceLine" id="cb4-13" data-line-number="13"><span class="dv">4</span> <span class="dv">2012-04-30</span> <span class="dv">04</span><span class="op">:</span><span class="dv">47</span><span class="op">:</span><span class="dv">48</span> <span class="dv">2012-04-30</span> <span class="dv">05</span><span class="op">:</span><span class="dv">21</span><span class="op">:</span><span class="dv">33</span>              <span class="dv">4</span>         <span class="dv">2025</span></a>
<a class="sourceLine" id="cb4-14" data-line-number="14"><span class="dv">5</span> <span class="dv">2012-04-30</span> <span class="dv">05</span><span class="op">:</span><span class="dv">23</span><span class="op">:</span><span class="dv">12</span> <span class="dv">2012-04-30</span> <span class="dv">05</span><span class="op">:</span><span class="dv">30</span><span class="op">:</span><span class="dv">32</span>              <span class="dv">3</span>          <span class="dv">440</span></a>
<a class="sourceLine" id="cb4-15" data-line-number="15"><span class="dv">6</span> <span class="dv">2012-04-30</span> <span class="dv">05</span><span class="op">:</span><span class="dv">31</span><span class="op">:</span><span class="dv">45</span> <span class="dv">2012-04-30</span> <span class="dv">05</span><span class="op">:</span><span class="dv">36</span><span class="op">:</span><span class="dv">50</span>              <span class="dv">2</span>          <span class="dv">305</span></a></code></pre></div>
</div>
</div>
<div id="kessel-method" class="section level2">
<h2 class="hasAnchor">
<a href="#kessel-method" class="anchor"></a>Kessel Method</h2>
<p>The “Kessel” method (<code>calculation_method = "kessel"</code>) is based on the method described by Kessel et al. (2016)<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>. It converts both the <em>first_detection</em> and <em>last_detection</em> columns into a date with no hours, minutes, or seconds. Next it creates a list of the unique days where a detection was seen. The size of the list is returned as the total number of days as an integer. This calculation is used to determine the total number of distinct days (T) and the total number of distinct days per location (S). Possible rounding error may occur as a detection on <code>2016-01-01 23:59:59</code> and a detection on <code>2016-01-02 00:00:01</code> would be counted as two days when it is really 2-3 seconds.</p>
<blockquote>
<p><span class="math inline">\(RI = \frac{S}{T}\)</span></p>
<p><span class="math inline">\(RI = Residence Index\)</span></p>
<p><span class="math inline">\(S\)</span> = Distinct number of days detected at the location</p>
<p><span class="math inline">\(T\)</span> = Distinct number of days detected at any location</p>
</blockquote>
<p><strong>Warning.</strong> <em>The current version of the Kessel method will not correctly count days if detection events span more than two calendar days (it will only count the first and last day of such events.</em></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">ri &lt;-<span class="st"> </span>glatos<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/glatos/topics/residence_index">residence_index</a></span>(det_events, <span class="dt">calculation_method =</span> <span class="st">'kessel'</span>)</a></code></pre></div>
<p>Note the resulting structure. By default, RI has been provided for each animal at each location (because <code>group_col = "animal_id"</code>).</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(ri)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">  animal_id days_detected total_days residency_index location</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="dv">1</span>       <span class="dv">153</span>             <span class="dv">0</span>         <span class="dv">78</span>      <span class="fl">0.00000000</span>      DRF</a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="dv">2</span>       <span class="dv">153</span>             <span class="dv">0</span>         <span class="dv">78</span>      <span class="fl">0.00000000</span>      DRL</a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="dv">3</span>       <span class="dv">153</span>             <span class="dv">0</span>         <span class="dv">78</span>      <span class="fl">0.00000000</span>      DRU</a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="dv">4</span>       <span class="dv">153</span>            <span class="dv">11</span>         <span class="dv">78</span>      <span class="fl">0.14102564</span>      FMP</a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="dv">5</span>       <span class="dv">153</span>             <span class="dv">0</span>         <span class="dv">78</span>      <span class="fl">0.00000000</span>      MAU</a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="dv">6</span>       <span class="dv">153</span>             <span class="dv">2</span>         <span class="dv">78</span>      <span class="fl">0.02564103</span>      OSC</a>
<a class="sourceLine" id="cb6-9" data-line-number="9">  mean_latitude mean_longitude</a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="dv">1</span>      <span class="fl">42.24937</span>      <span class="fl">-83.11824</span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11"><span class="dv">2</span>      <span class="fl">42.09603</span>      <span class="fl">-83.11902</span></a>
<a class="sourceLine" id="cb6-12" data-line-number="12"><span class="dv">3</span>      <span class="fl">42.34704</span>      <span class="fl">-82.95635</span></a>
<a class="sourceLine" id="cb6-13" data-line-number="13"><span class="dv">4</span>      <span class="fl">45.50106</span>      <span class="fl">-83.90481</span></a>
<a class="sourceLine" id="cb6-14" data-line-number="14"><span class="dv">5</span>      <span class="fl">41.59604</span>      <span class="fl">-83.58483</span></a>
<a class="sourceLine" id="cb6-15" data-line-number="15"><span class="dv">6</span>      <span class="fl">44.45155</span>      <span class="fl">-83.30073</span></a></code></pre></div>
<p>This allows us to explore differences in RI among locations while accounting for variation among individual animals. For example, the vertical boxplot below shows distributions of RI among fish at each location. Keep in mind that this is a treacherous example because there are only three fish in this data set.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/boxplot">boxplot</a></span>(residency_index<span class="op">~</span>location, <span class="dt">data =</span> ri, <span class="dt">horizontal =</span> <span class="ot">TRUE</span>, <span class="dt">las =</span> <span class="dv">1</span>, </a>
<a class="sourceLine" id="cb7-2" data-line-number="2">        <span class="dt">xlab=</span> <span class="st">'Residence Index (method = "kessel")'</span>)</a></code></pre></div>
<p><img src="residence_index_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
<p>Next we will plot RI values on a map. We’ll start with a plot for each fish on the sample Great Lakes polygon object that is bundled with the <em>glatos</em> package.</p>
<p>Here’s the plot for one fish (below). Note that in the code below we have arbitrarily scaled the point size by “30*RI + 1“. The”+ 1" just ensures that locations with RI = 0 would show up on the plot. We’ve also colored those points differently (pink) to clearly differentiate from the others (red).</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="co">#get example great lakes polygon</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(greatLakesPoly)</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="co">#plot; note indexing sp for plot.sp</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5">sp<span class="op">::</span><span class="kw">plot</span>(greatLakesPoly, <span class="dt">asp =</span> <span class="dv">1</span>, </a>
<a class="sourceLine" id="cb8-6" data-line-number="6">           <span class="dt">xlim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/range">range</a></span>(ri<span class="op">$</span>mean_longitude),</a>
<a class="sourceLine" id="cb8-7" data-line-number="7">           <span class="dt">ylim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/range">range</a></span>(ri<span class="op">$</span>mean_latitude),  </a>
<a class="sourceLine" id="cb8-8" data-line-number="8">           <span class="dt">col =</span> <span class="st">"white"</span>, <span class="dt">bg =</span> <span class="st">"grey80"</span>)</a>
<a class="sourceLine" id="cb8-9" data-line-number="9"></a>
<a class="sourceLine" id="cb8-10" data-line-number="10"><span class="co">#sort by decreasing residency_index so that large bubbles don't hide smaller</span></a>
<a class="sourceLine" id="cb8-11" data-line-number="11">ri &lt;-<span class="st"> </span>ri[<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/order">order</a></span>(ri<span class="op">$</span>residency_index, <span class="dt">decreasing =</span> <span class="ot">TRUE</span>),]</a>
<a class="sourceLine" id="cb8-12" data-line-number="12"></a>
<a class="sourceLine" id="cb8-13" data-line-number="13"><span class="co">#make column for symbol color</span></a>
<a class="sourceLine" id="cb8-14" data-line-number="14">ri<span class="op">$</span>color &lt;-<span class="st"> "red"</span></a>
<a class="sourceLine" id="cb8-15" data-line-number="15">ri<span class="op">$</span>color[ri<span class="op">$</span>residency_index <span class="op">==</span><span class="st"> </span><span class="dv">0</span>] &lt;-<span class="st"> "pink"</span> <span class="co">#sites with no detects</span></a>
<a class="sourceLine" id="cb8-16" data-line-number="16"></a>
<a class="sourceLine" id="cb8-17" data-line-number="17"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/points">points</a></span>(mean_latitude <span class="op">~</span><span class="st"> </span>mean_longitude, <span class="dt">data =</span> ri[ri<span class="op">$</span>animal_id <span class="op">==</span><span class="st"> "153"</span>,], </a>
<a class="sourceLine" id="cb8-18" data-line-number="18">  <span class="dt">pch =</span> <span class="dv">21</span>, <span class="dt">cex =</span> <span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">30</span><span class="op">*</span>residency_index, <span class="dt">bg =</span> color)</a></code></pre></div>
<p><img src="residence_index_files/figure-html/unnamed-chunk-8-1.png" width="480"></p>
<p>Notice that this fish was detected at all sites in L. Huron and none in L. Erie and detections at the two more northern sites accounted for more time than other sites.</p>
<p>The second fish shows a much different pattern (below), with detections only in the Maumee River and near reefs in the Western Basin.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="co">#plot; note indexing sp for plot.sp</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2">sp<span class="op">::</span><span class="kw">plot</span>(greatLakesPoly, <span class="dt">asp =</span> <span class="dv">1</span>, </a>
<a class="sourceLine" id="cb9-3" data-line-number="3">           <span class="dt">xlim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/range">range</a></span>(ri<span class="op">$</span>mean_longitude),</a>
<a class="sourceLine" id="cb9-4" data-line-number="4">           <span class="dt">ylim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/range">range</a></span>(ri<span class="op">$</span>mean_latitude),  </a>
<a class="sourceLine" id="cb9-5" data-line-number="5">           <span class="dt">col =</span> <span class="st">"white"</span>, <span class="dt">bg =</span> <span class="st">"grey80"</span>)</a>
<a class="sourceLine" id="cb9-6" data-line-number="6"></a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/points">points</a></span>(mean_latitude <span class="op">~</span><span class="st"> </span>mean_longitude, <span class="dt">data =</span> ri[ri<span class="op">$</span>animal_id <span class="op">==</span><span class="st"> "22"</span>,], </a>
<a class="sourceLine" id="cb9-8" data-line-number="8">  <span class="dt">pch =</span> <span class="dv">21</span>, <span class="dt">cex =</span> <span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">30</span><span class="op">*</span>residency_index, <span class="dt">bg =</span> color)</a></code></pre></div>
<p><img src="residence_index_files/figure-html/unnamed-chunk-9-1.png" width="480"></p>
<p>The third fish shares one site in common (Maumee R.) with the second fish, but was otherwise only detected in the Detroit and St. Clair rivers.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="co">#plot; note indexing sp for plot.sp</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2">sp<span class="op">::</span><span class="kw">plot</span>(greatLakesPoly, <span class="dt">asp =</span> <span class="dv">1</span>, </a>
<a class="sourceLine" id="cb10-3" data-line-number="3">           <span class="dt">xlim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/range">range</a></span>(ri<span class="op">$</span>mean_longitude),</a>
<a class="sourceLine" id="cb10-4" data-line-number="4">           <span class="dt">ylim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/range">range</a></span>(ri<span class="op">$</span>mean_latitude),  </a>
<a class="sourceLine" id="cb10-5" data-line-number="5">           <span class="dt">col =</span> <span class="st">"white"</span>, <span class="dt">bg =</span> <span class="st">"grey80"</span>)</a>
<a class="sourceLine" id="cb10-6" data-line-number="6"></a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/points">points</a></span>(mean_latitude <span class="op">~</span><span class="st"> </span>mean_longitude, <span class="dt">data =</span> ri[ri<span class="op">$</span>animal_id <span class="op">==</span><span class="st"> "23"</span>,], </a>
<a class="sourceLine" id="cb10-8" data-line-number="8">  <span class="dt">pch =</span> <span class="dv">21</span>, <span class="dt">cex =</span> <span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">30</span><span class="op">*</span>residency_index, <span class="dt">bg =</span> color)</a></code></pre></div>
<p><img src="residence_index_files/figure-html/unnamed-chunk-10-1.png" width="480"></p>
<p>Next, we will calculate and plot the mean RI among the three fish (yes, the sample size is too small; this is just a demo).</p>
<p>We will use functions from the <em>dplyr</em> package and pipes (<code>%&gt;%</code>) from <em>magrittr</em> package because that’s what the kids are into these days.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"></a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="co">#calculate mean and sd of RI among fish</span></a>
<a class="sourceLine" id="cb11-3" data-line-number="3">rik_summary &lt;-<span class="st"> </span>ri <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="st">               </span><span class="kw">group_by</span>(location, mean_latitude, mean_longitude) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="st">               </span><span class="kw">summarise</span>(</a>
<a class="sourceLine" id="cb11-6" data-line-number="6">                    <span class="dt">ri_mean =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean</a></span>(residency_index),</a>
<a class="sourceLine" id="cb11-7" data-line-number="7">                    <span class="dt">ri_sd =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/sd">sd</a></span>(residency_index))</a>
<a class="sourceLine" id="cb11-8" data-line-number="8"></a>
<a class="sourceLine" id="cb11-9" data-line-number="9"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(rik_summary)</a>
<a class="sourceLine" id="cb11-10" data-line-number="10"><span class="co"># A tibble: 6 x 5</span></a>
<a class="sourceLine" id="cb11-11" data-line-number="11"><span class="co"># Groups:   location, mean_latitude [6]</span></a>
<a class="sourceLine" id="cb11-12" data-line-number="12">  location mean_latitude mean_longitude ri_mean   ri_sd</a>
<a class="sourceLine" id="cb11-13" data-line-number="13">  <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">            </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">          </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">   </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">   </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb11-14" data-line-number="14"><span class="dv">1</span> DRF               <span class="fl">42.2</span>          <span class="fl">-83.1</span> <span class="fl">0.00427</span> <span class="fl">0.00740</span></a>
<a class="sourceLine" id="cb11-15" data-line-number="15"><span class="dv">2</span> DRL               <span class="fl">42.1</span>          <span class="fl">-83.1</span> <span class="fl">0.00427</span> <span class="fl">0.00740</span></a>
<a class="sourceLine" id="cb11-16" data-line-number="16"><span class="dv">3</span> DRU               <span class="fl">42.3</span>          <span class="fl">-83.0</span> <span class="fl">0.00427</span> <span class="fl">0.00740</span></a>
<a class="sourceLine" id="cb11-17" data-line-number="17"><span class="dv">4</span> FMP               <span class="fl">45.5</span>          <span class="fl">-83.9</span> <span class="fl">0.0470</span>  <span class="fl">0.0814</span> </a>
<a class="sourceLine" id="cb11-18" data-line-number="18"><span class="dv">5</span> MAU               <span class="fl">41.6</span>          <span class="fl">-83.6</span> <span class="fl">0.0769</span>  <span class="fl">0.0678</span> </a>
<a class="sourceLine" id="cb11-19" data-line-number="19"><span class="dv">6</span> OSC               <span class="fl">44.5</span>          <span class="fl">-83.3</span> <span class="fl">0.00855</span> <span class="fl">0.0148</span> </a></code></pre></div>
<p>Now we plot the means on a map.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="co">#plot; note indexing sp for plot.sp</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2">sp<span class="op">::</span><span class="kw">plot</span>(greatLakesPoly, <span class="dt">asp =</span> <span class="dv">1</span>, </a>
<a class="sourceLine" id="cb12-3" data-line-number="3">           <span class="dt">xlim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/range">range</a></span>(ri<span class="op">$</span>mean_longitude),</a>
<a class="sourceLine" id="cb12-4" data-line-number="4">           <span class="dt">ylim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/range">range</a></span>(ri<span class="op">$</span>mean_latitude),  </a>
<a class="sourceLine" id="cb12-5" data-line-number="5">           <span class="dt">col =</span> <span class="st">"white"</span>, <span class="dt">bg =</span> <span class="st">"grey80"</span>)</a>
<a class="sourceLine" id="cb12-6" data-line-number="6"></a>
<a class="sourceLine" id="cb12-7" data-line-number="7"><span class="co">#sort by decreasing residency_index so that large bubbles don't hide smaller</span></a>
<a class="sourceLine" id="cb12-8" data-line-number="8">rik_summary &lt;-<span class="st"> </span>rik_summary[<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/order">order</a></span>(rik_summary<span class="op">$</span>ri_mean, <span class="dt">decreasing =</span> <span class="ot">TRUE</span>),]</a>
<a class="sourceLine" id="cb12-9" data-line-number="9"></a>
<a class="sourceLine" id="cb12-10" data-line-number="10"><span class="co">#make column for symbol color</span></a>
<a class="sourceLine" id="cb12-11" data-line-number="11">rik_summary<span class="op">$</span>color &lt;-<span class="st"> "red"</span></a>
<a class="sourceLine" id="cb12-12" data-line-number="12">rik_summary<span class="op">$</span>color[rik_summary<span class="op">$</span>ri_mean <span class="op">==</span><span class="st"> </span><span class="dv">0</span>] &lt;-<span class="st"> "pink"</span> <span class="co">#sites with no detects</span></a>
<a class="sourceLine" id="cb12-13" data-line-number="13"></a>
<a class="sourceLine" id="cb12-14" data-line-number="14"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/points">points</a></span>(mean_latitude <span class="op">~</span><span class="st"> </span>mean_longitude, <span class="dt">data =</span> rik_summary, </a>
<a class="sourceLine" id="cb12-15" data-line-number="15">  <span class="dt">pch =</span> <span class="dv">21</span>, <span class="dt">cex =</span> <span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">30</span><span class="op">*</span>ri_mean, <span class="dt">bg =</span> color)</a></code></pre></div>
<p><img src="residence_index_files/figure-html/unnamed-chunk-12-1.png" width="480"></p>
<p>If we had more than three fish in our sample data set, we might infer something about the walleye space use from this information.</p>
<div id="optional-location-data" class="section level3">
<h3 class="hasAnchor">
<a href="#optional-location-data" class="anchor"></a>Optional location data</h3>
<p>Notice in the last plot that all there were no locations without detections. Let’s bring in receiver location data from the rest of the GLATOS network. We will read in the sample receiver file using <code><a href="../reference/read_glatos_receivers.html">glatos::read_glatos_receivers()</a></code> and then change column names to match those required by <code><a href="../reference/residence_index.html">residence_index()</a></code>.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="co">#get sample receiver data from pkg</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2">loc_file &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="st">"extdata"</span>, <span class="st">"sample_receivers.csv"</span>, </a>
<a class="sourceLine" id="cb13-3" data-line-number="3">                        <span class="dt">package =</span> <span class="st">"glatos"</span>)</a>
<a class="sourceLine" id="cb13-4" data-line-number="4">locs &lt;-<span class="st"> </span><span class="kw"><a href="../reference/read_glatos_receivers.html">read_glatos_receivers</a></span>(loc_file)</a>
<a class="sourceLine" id="cb13-5" data-line-number="5">locs &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/unique">unique</a></span>(locs[ , <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"glatos_array"</span>, <span class="st">"deploy_lat"</span>, <span class="st">"deploy_long"</span>)])</a>
<a class="sourceLine" id="cb13-6" data-line-number="6"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(locs) &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"location"</span>, <span class="st">"mean_latitude"</span>, <span class="st">"mean_longitude"</span>)</a>
<a class="sourceLine" id="cb13-7" data-line-number="7"></a>
<a class="sourceLine" id="cb13-8" data-line-number="8">rik2 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/residence_index.html">residence_index</a></span>(det_events, <span class="dt">locations =</span> locs,</a>
<a class="sourceLine" id="cb13-9" data-line-number="9">                         <span class="dt">calculation_method =</span> <span class="st">'kessel'</span>)</a></code></pre></div>
<p>Now we calculate mean RI and graph again.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="co">#calculate mean and sd of RI among fish</span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2">rik2_summary &lt;-<span class="st"> </span>rik2 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb14-3" data-line-number="3"><span class="st">               </span><span class="kw">group_by</span>(location, mean_latitude, mean_longitude) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="st">               </span><span class="kw">summarise</span>(</a>
<a class="sourceLine" id="cb14-5" data-line-number="5">                    <span class="dt">ri_mean =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean</a></span>(residency_index),</a>
<a class="sourceLine" id="cb14-6" data-line-number="6">                    <span class="dt">ri_sd =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/sd">sd</a></span>(residency_index))</a>
<a class="sourceLine" id="cb14-7" data-line-number="7"></a>
<a class="sourceLine" id="cb14-8" data-line-number="8"><span class="co">#sort by decreasing residency_index so that large bubbles don't hide smaller</span></a>
<a class="sourceLine" id="cb14-9" data-line-number="9">rik2_summary &lt;-<span class="st"> </span>rik2_summary[<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/order">order</a></span>(rik2_summary<span class="op">$</span>ri_mean, <span class="dt">decreasing =</span> <span class="ot">TRUE</span>),]</a>
<a class="sourceLine" id="cb14-10" data-line-number="10"></a>
<a class="sourceLine" id="cb14-11" data-line-number="11"><span class="co">#plot; note indexing sp for plot.sp</span></a>
<a class="sourceLine" id="cb14-12" data-line-number="12">sp<span class="op">::</span><span class="kw">plot</span>(greatLakesPoly, <span class="dt">asp =</span> <span class="dv">1</span>, </a>
<a class="sourceLine" id="cb14-13" data-line-number="13">           <span class="dt">xlim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/range">range</a></span>(rik2<span class="op">$</span>mean_longitude),</a>
<a class="sourceLine" id="cb14-14" data-line-number="14">           <span class="dt">ylim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/range">range</a></span>(rik2<span class="op">$</span>mean_latitude),  </a>
<a class="sourceLine" id="cb14-15" data-line-number="15">           <span class="dt">col =</span> <span class="st">"white"</span>, <span class="dt">bg =</span> <span class="st">"grey80"</span>)</a>
<a class="sourceLine" id="cb14-16" data-line-number="16"></a>
<a class="sourceLine" id="cb14-17" data-line-number="17"><span class="co">#make column for symbol color</span></a>
<a class="sourceLine" id="cb14-18" data-line-number="18">rik2_summary<span class="op">$</span>color &lt;-<span class="st"> "red"</span></a>
<a class="sourceLine" id="cb14-19" data-line-number="19">rik2_summary<span class="op">$</span>color[rik2_summary<span class="op">$</span>ri_mean <span class="op">==</span><span class="st"> </span><span class="dv">0</span>] &lt;-<span class="st"> "pink"</span> <span class="co">#sites with no detects</span></a>
<a class="sourceLine" id="cb14-20" data-line-number="20"></a>
<a class="sourceLine" id="cb14-21" data-line-number="21"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/points">points</a></span>(mean_latitude <span class="op">~</span><span class="st"> </span>mean_longitude, <span class="dt">data =</span> rik2_summary, </a>
<a class="sourceLine" id="cb14-22" data-line-number="22">  <span class="dt">pch =</span> <span class="dv">21</span>, <span class="dt">cex =</span> <span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">30</span><span class="op">*</span>ri_mean, <span class="dt">bg =</span> color)</a></code></pre></div>
<p><img src="residence_index_files/figure-html/unnamed-chunk-14-1.png" width="480"></p>
</div>
<div id="groupwise-total-time" class="section level3">
<h3 class="hasAnchor">
<a href="#groupwise-total-time" class="anchor"></a>Groupwise total time</h3>
<p>Next, let’s recalculate RI using <code>groupwise_total = TRUE</code> so that RI represents the proportion of each fish’s own time spent at each location.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1">rik3 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/residence_index.html">residence_index</a></span>(det_events, <span class="dt">locations =</span> locs,</a>
<a class="sourceLine" id="cb15-2" data-line-number="2">                        <span class="dt">calculation_method =</span> <span class="st">'kessel'</span>,</a>
<a class="sourceLine" id="cb15-3" data-line-number="3">                        <span class="dt">groupwise_total =</span> <span class="ot">TRUE</span>  )</a></code></pre></div>
<p>Now we calculate mean RI and graph again.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="co">#calculate mean and sd of RI among fish</span></a>
<a class="sourceLine" id="cb16-2" data-line-number="2">rik3_summary &lt;-<span class="st"> </span>rik3 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="st">               </span><span class="kw">group_by</span>(location, mean_latitude, mean_longitude) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb16-4" data-line-number="4"><span class="st">               </span><span class="kw">summarise</span>(</a>
<a class="sourceLine" id="cb16-5" data-line-number="5">                    <span class="dt">ri_mean =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean</a></span>(residency_index),</a>
<a class="sourceLine" id="cb16-6" data-line-number="6">                    <span class="dt">ri_sd =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/sd">sd</a></span>(residency_index))</a>
<a class="sourceLine" id="cb16-7" data-line-number="7"></a>
<a class="sourceLine" id="cb16-8" data-line-number="8"><span class="co">#sort by decreasing residency_index so that large bubbles don't hide smaller</span></a>
<a class="sourceLine" id="cb16-9" data-line-number="9">rik3_summary &lt;-<span class="st"> </span>rik3_summary[<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/order">order</a></span>(rik3_summary<span class="op">$</span>ri_mean, <span class="dt">decreasing =</span> <span class="ot">TRUE</span>),]</a>
<a class="sourceLine" id="cb16-10" data-line-number="10"></a>
<a class="sourceLine" id="cb16-11" data-line-number="11"><span class="co">#plot; note indexing sp for plot.sp</span></a>
<a class="sourceLine" id="cb16-12" data-line-number="12">sp<span class="op">::</span><span class="kw">plot</span>(greatLakesPoly, <span class="dt">asp =</span> <span class="dv">1</span>, </a>
<a class="sourceLine" id="cb16-13" data-line-number="13">           <span class="dt">xlim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/range">range</a></span>(rik3<span class="op">$</span>mean_longitude),</a>
<a class="sourceLine" id="cb16-14" data-line-number="14">           <span class="dt">ylim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/range">range</a></span>(rik3<span class="op">$</span>mean_latitude),  </a>
<a class="sourceLine" id="cb16-15" data-line-number="15">           <span class="dt">col =</span> <span class="st">"white"</span>, <span class="dt">bg =</span> <span class="st">"grey80"</span>)</a>
<a class="sourceLine" id="cb16-16" data-line-number="16"></a>
<a class="sourceLine" id="cb16-17" data-line-number="17"><span class="co">#make column for symbol color</span></a>
<a class="sourceLine" id="cb16-18" data-line-number="18">rik3_summary<span class="op">$</span>color &lt;-<span class="st"> "red"</span></a>
<a class="sourceLine" id="cb16-19" data-line-number="19">rik3_summary<span class="op">$</span>color[rik3_summary<span class="op">$</span>ri_mean <span class="op">==</span><span class="st"> </span><span class="dv">0</span>] &lt;-<span class="st"> "pink"</span> <span class="co">#sites with no detects</span></a>
<a class="sourceLine" id="cb16-20" data-line-number="20"></a>
<a class="sourceLine" id="cb16-21" data-line-number="21"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/points">points</a></span>(mean_latitude <span class="op">~</span><span class="st"> </span>mean_longitude, <span class="dt">data =</span> rik3_summary, </a>
<a class="sourceLine" id="cb16-22" data-line-number="22">  <span class="dt">pch =</span> <span class="dv">21</span>, <span class="dt">cex =</span> <span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">30</span><span class="op">*</span>ri_mean, <span class="dt">bg =</span> color)</a></code></pre></div>
<p><img src="residence_index_files/figure-html/unnamed-chunk-16-1.png" width="480"></p>
<p>Results here are different than the previous example, with noticably larger mean RI values in Lake Erie and the Maumee River when total time represents individual fish instead of all fish.</p>

</div>
</div>
<div id="time-interval-method" class="section level2">
<h2 class="hasAnchor">
<a href="#time-interval-method" class="anchor"></a>Time Interval Method</h2>
<p>The “time interval” method (<code>calculation_method = "time_interval"</code>) is similar to the “kessel” method, but allows the user to specify size of the time interval. Specifically, this method determines the number of time intervals in which detections occurred at each location and as a fraction of the number of time intervals in which detections occurred among all sites. For each location, residency index (RI) is calculated:</p>
<blockquote>
<p><span class="math inline">\(RI = \frac{L}{T}\)</span></p>
<p><span class="math inline">\(RI = Residence Index\)</span></p>
<p><span class="math inline">\(L\)</span> = Distinct number of time intervals in which detection observed at this location</p>
<p><span class="math inline">\(T\)</span> = Distinct number of time intervals in which detection observed at any location</p>
</blockquote>
<p>For consistency with other calculation_methods, the L and T are not reported, but are converted cumulative time covered in days and reported in columns <em>days_detected</em> and <em>total_days</em>.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1">riti &lt;-<span class="st"> </span>glatos<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/glatos/topics/residence_index">residence_index</a></span>(det_events, <span class="dt">locations =</span> locs, </a>
<a class="sourceLine" id="cb17-2" data-line-number="2">                                <span class="dt">calculation_method =</span> <span class="st">"time_interval"</span>)</a></code></pre></div>
<p>Note the resulting structure.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(riti)</a>
<a class="sourceLine" id="cb18-2" data-line-number="2">  animal_id days_detected total_days residency_index location</a>
<a class="sourceLine" id="cb18-3" data-line-number="3"><span class="dv">1</span>       <span class="dv">153</span>             <span class="dv">0</span>         <span class="dv">99</span>               <span class="dv">0</span>      AGR</a>
<a class="sourceLine" id="cb18-4" data-line-number="4"><span class="dv">2</span>       <span class="dv">153</span>             <span class="dv">0</span>         <span class="dv">99</span>               <span class="dv">0</span>      BBI</a>
<a class="sourceLine" id="cb18-5" data-line-number="5"><span class="dv">3</span>       <span class="dv">153</span>             <span class="dv">0</span>         <span class="dv">99</span>               <span class="dv">0</span>      BBW</a>
<a class="sourceLine" id="cb18-6" data-line-number="6"><span class="dv">4</span>       <span class="dv">153</span>             <span class="dv">0</span>         <span class="dv">99</span>               <span class="dv">0</span>      BLC</a>
<a class="sourceLine" id="cb18-7" data-line-number="7"><span class="dv">5</span>       <span class="dv">153</span>             <span class="dv">0</span>         <span class="dv">99</span>               <span class="dv">0</span>      BLL</a>
<a class="sourceLine" id="cb18-8" data-line-number="8"><span class="dv">6</span>       <span class="dv">153</span>             <span class="dv">0</span>         <span class="dv">99</span>               <span class="dv">0</span>      BMR</a>
<a class="sourceLine" id="cb18-9" data-line-number="9">  mean_latitude mean_longitude</a>
<a class="sourceLine" id="cb18-10" data-line-number="10"><span class="dv">1</span>      <span class="fl">44.02980</span>      <span class="fl">-83.68433</span></a>
<a class="sourceLine" id="cb18-11" data-line-number="11"><span class="dv">2</span>      <span class="fl">45.69734</span>      <span class="fl">-84.41925</span></a>
<a class="sourceLine" id="cb18-12" data-line-number="12"><span class="dv">3</span>      <span class="fl">45.77276</span>      <span class="fl">-84.61658</span></a>
<a class="sourceLine" id="cb18-13" data-line-number="13"><span class="dv">4</span>      <span class="fl">46.49420</span>      <span class="fl">-84.27662</span></a>
<a class="sourceLine" id="cb18-14" data-line-number="14"><span class="dv">5</span>      <span class="fl">46.53541</span>      <span class="fl">-84.21317</span></a>
<a class="sourceLine" id="cb18-15" data-line-number="15"><span class="dv">6</span>      <span class="fl">45.53289</span>      <span class="fl">-84.12079</span></a></code></pre></div>
<p>Now we calculate mean RI and graph again.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="co">#calculate mean and sd of RI among fish</span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2">riti_summary &lt;-<span class="st"> </span>riti <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-3" data-line-number="3"><span class="st">               </span><span class="kw">group_by</span>(location, mean_latitude, mean_longitude) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-4" data-line-number="4"><span class="st">               </span><span class="kw">summarise</span>(</a>
<a class="sourceLine" id="cb19-5" data-line-number="5">                    <span class="dt">ri_mean =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean</a></span>(residency_index),</a>
<a class="sourceLine" id="cb19-6" data-line-number="6">                    <span class="dt">ri_sd =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/sd">sd</a></span>(residency_index))</a>
<a class="sourceLine" id="cb19-7" data-line-number="7"></a>
<a class="sourceLine" id="cb19-8" data-line-number="8"><span class="co">#sort by decreasing residency_index so that large bubbles don't hide smaller</span></a>
<a class="sourceLine" id="cb19-9" data-line-number="9">riti_summary &lt;-<span class="st"> </span>riti_summary[<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/order">order</a></span>(riti_summary<span class="op">$</span>ri_mean, <span class="dt">decreasing =</span> <span class="ot">TRUE</span>),]</a>
<a class="sourceLine" id="cb19-10" data-line-number="10"></a>
<a class="sourceLine" id="cb19-11" data-line-number="11"><span class="co">#plot; note indexing sp for plot.sp</span></a>
<a class="sourceLine" id="cb19-12" data-line-number="12">sp<span class="op">::</span><span class="kw">plot</span>(greatLakesPoly, <span class="dt">asp =</span> <span class="dv">1</span>, </a>
<a class="sourceLine" id="cb19-13" data-line-number="13">           <span class="dt">xlim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/range">range</a></span>(riti<span class="op">$</span>mean_longitude),</a>
<a class="sourceLine" id="cb19-14" data-line-number="14">           <span class="dt">ylim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/range">range</a></span>(riti<span class="op">$</span>mean_latitude),  </a>
<a class="sourceLine" id="cb19-15" data-line-number="15">           <span class="dt">col =</span> <span class="st">"white"</span>, <span class="dt">bg =</span> <span class="st">"grey80"</span>)</a>
<a class="sourceLine" id="cb19-16" data-line-number="16"></a>
<a class="sourceLine" id="cb19-17" data-line-number="17"><span class="co">#make column for symbol color</span></a>
<a class="sourceLine" id="cb19-18" data-line-number="18">riti_summary<span class="op">$</span>color &lt;-<span class="st"> "red"</span></a>
<a class="sourceLine" id="cb19-19" data-line-number="19">riti_summary<span class="op">$</span>color[riti_summary<span class="op">$</span>ri_mean <span class="op">==</span><span class="st"> </span><span class="dv">0</span>] &lt;-<span class="st"> "pink"</span> <span class="co">#sites with no detects</span></a>
<a class="sourceLine" id="cb19-20" data-line-number="20"></a>
<a class="sourceLine" id="cb19-21" data-line-number="21"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/points">points</a></span>(mean_latitude <span class="op">~</span><span class="st"> </span>mean_longitude, <span class="dt">data =</span> riti_summary, </a>
<a class="sourceLine" id="cb19-22" data-line-number="22">  <span class="dt">pch =</span> <span class="dv">21</span>, <span class="dt">cex =</span> <span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">30</span><span class="op">*</span>ri_mean, <span class="dt">bg =</span> color)</a></code></pre></div>
<p><img src="residence_index_files/figure-html/unnamed-chunk-19-1.png" width="480"></p>
<p>This is very similar to the “kessel” results, as expected.</p>
<div id="changing-time-interval-size" class="section level3">
<h3 class="hasAnchor">
<a href="#changing-time-interval-size" class="anchor"></a>Changing time interval size</h3>
<p>Next, let’s recalculate RI using finer (15 min) and coarser (monthly) time intervals.</p>
<div id="minute-intervals" class="section level4">
<h4 class="hasAnchor">
<a href="#minute-intervals" class="anchor"></a>15-minute intervals</h4>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1">riti &lt;-<span class="st"> </span>glatos<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/glatos/topics/residence_index">residence_index</a></span>(det_events, <span class="dt">locations =</span> locs, </a>
<a class="sourceLine" id="cb20-2" data-line-number="2">                                <span class="dt">calculation_method =</span> <span class="st">"time_interval"</span>,</a>
<a class="sourceLine" id="cb20-3" data-line-number="3">                                <span class="dt">time_interval_size =</span> <span class="st">"15 mins"</span>)</a>
<a class="sourceLine" id="cb20-4" data-line-number="4"></a>
<a class="sourceLine" id="cb20-5" data-line-number="5"><span class="co">#calculate mean and sd of RI among fish</span></a>
<a class="sourceLine" id="cb20-6" data-line-number="6">riti_summary &lt;-<span class="st"> </span>riti <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb20-7" data-line-number="7"><span class="st">               </span><span class="kw">group_by</span>(location, mean_latitude, mean_longitude) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb20-8" data-line-number="8"><span class="st">               </span><span class="kw">summarise</span>(</a>
<a class="sourceLine" id="cb20-9" data-line-number="9">                    <span class="dt">ri_mean =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean</a></span>(residency_index),</a>
<a class="sourceLine" id="cb20-10" data-line-number="10">                    <span class="dt">ri_sd =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/sd">sd</a></span>(residency_index))</a>
<a class="sourceLine" id="cb20-11" data-line-number="11"></a>
<a class="sourceLine" id="cb20-12" data-line-number="12"><span class="co">#sort by decreasing residency_index so that large bubbles don't hide smaller</span></a>
<a class="sourceLine" id="cb20-13" data-line-number="13">riti_summary &lt;-<span class="st"> </span>riti_summary[<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/order">order</a></span>(riti_summary<span class="op">$</span>ri_mean, <span class="dt">decreasing =</span> <span class="ot">TRUE</span>),]</a>
<a class="sourceLine" id="cb20-14" data-line-number="14"></a>
<a class="sourceLine" id="cb20-15" data-line-number="15"><span class="co">#plot; note indexing sp for plot.sp</span></a>
<a class="sourceLine" id="cb20-16" data-line-number="16">sp<span class="op">::</span><span class="kw">plot</span>(greatLakesPoly, <span class="dt">asp =</span> <span class="dv">1</span>, </a>
<a class="sourceLine" id="cb20-17" data-line-number="17">           <span class="dt">xlim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/range">range</a></span>(riti<span class="op">$</span>mean_longitude),</a>
<a class="sourceLine" id="cb20-18" data-line-number="18">           <span class="dt">ylim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/range">range</a></span>(riti<span class="op">$</span>mean_latitude),  </a>
<a class="sourceLine" id="cb20-19" data-line-number="19">           <span class="dt">col =</span> <span class="st">"white"</span>, <span class="dt">bg =</span> <span class="st">"grey80"</span>)</a>
<a class="sourceLine" id="cb20-20" data-line-number="20"></a>
<a class="sourceLine" id="cb20-21" data-line-number="21"><span class="co">#make column for symbol color</span></a>
<a class="sourceLine" id="cb20-22" data-line-number="22">riti_summary<span class="op">$</span>color &lt;-<span class="st"> "red"</span></a>
<a class="sourceLine" id="cb20-23" data-line-number="23">riti_summary<span class="op">$</span>color[riti_summary<span class="op">$</span>ri_mean <span class="op">==</span><span class="st"> </span><span class="dv">0</span>] &lt;-<span class="st"> "pink"</span> <span class="co">#sites with no detects</span></a>
<a class="sourceLine" id="cb20-24" data-line-number="24"></a>
<a class="sourceLine" id="cb20-25" data-line-number="25"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/points">points</a></span>(mean_latitude <span class="op">~</span><span class="st"> </span>mean_longitude, <span class="dt">data =</span> riti_summary, </a>
<a class="sourceLine" id="cb20-26" data-line-number="26">  <span class="dt">pch =</span> <span class="dv">21</span>, <span class="dt">cex =</span> <span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">30</span><span class="op">*</span>ri_mean, <span class="dt">bg =</span> color)</a></code></pre></div>
<p><img src="residence_index_files/figure-html/unnamed-chunk-20-1.png" width="480"></p>
</div>
<div id="monthly-intervals" class="section level4">
<h4 class="hasAnchor">
<a href="#monthly-intervals" class="anchor"></a>monthly intervals</h4>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1">riti &lt;-<span class="st"> </span>glatos<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/glatos/topics/residence_index">residence_index</a></span>(det_events, <span class="dt">locations =</span> locs, </a>
<a class="sourceLine" id="cb21-2" data-line-number="2">                                <span class="dt">calculation_method =</span> <span class="st">"time_interval"</span>,</a>
<a class="sourceLine" id="cb21-3" data-line-number="3">                                <span class="dt">time_interval_size =</span> <span class="st">"1 month"</span>)</a>
<a class="sourceLine" id="cb21-4" data-line-number="4"></a>
<a class="sourceLine" id="cb21-5" data-line-number="5"><span class="co">#calculate mean and sd of RI among fish</span></a>
<a class="sourceLine" id="cb21-6" data-line-number="6">riti_summary &lt;-<span class="st"> </span>riti <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb21-7" data-line-number="7"><span class="st">               </span><span class="kw">group_by</span>(location, mean_latitude, mean_longitude) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb21-8" data-line-number="8"><span class="st">               </span><span class="kw">summarise</span>(</a>
<a class="sourceLine" id="cb21-9" data-line-number="9">                    <span class="dt">ri_mean =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean</a></span>(residency_index),</a>
<a class="sourceLine" id="cb21-10" data-line-number="10">                    <span class="dt">ri_sd =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/sd">sd</a></span>(residency_index))</a>
<a class="sourceLine" id="cb21-11" data-line-number="11"></a>
<a class="sourceLine" id="cb21-12" data-line-number="12"><span class="co">#sort by decreasing residency_index so that large bubbles don't hide smaller</span></a>
<a class="sourceLine" id="cb21-13" data-line-number="13">riti_summary &lt;-<span class="st"> </span>riti_summary[<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/order">order</a></span>(riti_summary<span class="op">$</span>ri_mean, <span class="dt">decreasing =</span> <span class="ot">TRUE</span>),]</a>
<a class="sourceLine" id="cb21-14" data-line-number="14"></a>
<a class="sourceLine" id="cb21-15" data-line-number="15"><span class="co">#plot; note indexing sp for plot.sp</span></a>
<a class="sourceLine" id="cb21-16" data-line-number="16">sp<span class="op">::</span><span class="kw">plot</span>(greatLakesPoly, <span class="dt">asp =</span> <span class="dv">1</span>, </a>
<a class="sourceLine" id="cb21-17" data-line-number="17">           <span class="dt">xlim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/range">range</a></span>(riti<span class="op">$</span>mean_longitude),</a>
<a class="sourceLine" id="cb21-18" data-line-number="18">           <span class="dt">ylim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/range">range</a></span>(riti<span class="op">$</span>mean_latitude),  </a>
<a class="sourceLine" id="cb21-19" data-line-number="19">           <span class="dt">col =</span> <span class="st">"white"</span>, <span class="dt">bg =</span> <span class="st">"grey80"</span>)</a>
<a class="sourceLine" id="cb21-20" data-line-number="20"></a>
<a class="sourceLine" id="cb21-21" data-line-number="21"><span class="co">#make column for symbol color</span></a>
<a class="sourceLine" id="cb21-22" data-line-number="22">riti_summary<span class="op">$</span>color &lt;-<span class="st"> "red"</span></a>
<a class="sourceLine" id="cb21-23" data-line-number="23">riti_summary<span class="op">$</span>color[riti_summary<span class="op">$</span>ri_mean <span class="op">==</span><span class="st"> </span><span class="dv">0</span>] &lt;-<span class="st"> "pink"</span> <span class="co">#sites with no detects</span></a>
<a class="sourceLine" id="cb21-24" data-line-number="24"></a>
<a class="sourceLine" id="cb21-25" data-line-number="25"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/points">points</a></span>(mean_latitude <span class="op">~</span><span class="st"> </span>mean_longitude, <span class="dt">data =</span> riti_summary, </a>
<a class="sourceLine" id="cb21-26" data-line-number="26">  <span class="dt">pch =</span> <span class="dv">21</span>, <span class="dt">cex =</span> <span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">30</span><span class="op">*</span>ri_mean, <span class="dt">bg =</span> color)</a></code></pre></div>
<p><img src="residence_index_files/figure-html/unnamed-chunk-21-1.png" width="480"></p>

</div>
</div>
</div>
<div id="timedelta-method" class="section level2">
<h2 class="hasAnchor">
<a href="#timedelta-method" class="anchor"></a>Timedelta Method</h2>
<p>The “Timedelta” method (method (<code>calculation_method = "timedelta"</code>) calculates the time difference between the first <em>first_detection</em> among all detection events and the last <em>last_detection</em> among all detection events. The timedelta for each location is divided by the timedelta among all locations to determine the residence index.</p>
<blockquote>
<p><span class="math inline">\(RI = \frac{\Delta S}{\Delta T}\)</span></p>
<p><span class="math inline">\(RI\)</span> = Residence Index</p>
<p><span class="math inline">\(\Delta S\)</span> = Last detection time at the location - First detection time at the location</p>
<p><span class="math inline">\(\Delta T\)</span> = Last detection time at any location - First detection time at any location</p>
</blockquote>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">ritd &lt;-<span class="st"> </span>glatos<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/glatos/topics/residence_index">residence_index</a></span>(det_events, <span class="dt">locations =</span> locs, </a>
<a class="sourceLine" id="cb22-2" data-line-number="2">                                <span class="dt">calculation_method =</span> <span class="st">"timedelta"</span>)</a>
<a class="sourceLine" id="cb22-3" data-line-number="3"></a>
<a class="sourceLine" id="cb22-4" data-line-number="4"><span class="co">#calculate mean and sd of RI among fish</span></a>
<a class="sourceLine" id="cb22-5" data-line-number="5">ritd_summary &lt;-<span class="st"> </span>ritd <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb22-6" data-line-number="6"><span class="st">               </span><span class="kw">group_by</span>(location, mean_latitude, mean_longitude) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb22-7" data-line-number="7"><span class="st">               </span><span class="kw">summarise</span>(</a>
<a class="sourceLine" id="cb22-8" data-line-number="8">                    <span class="dt">ri_mean =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean</a></span>(residency_index),</a>
<a class="sourceLine" id="cb22-9" data-line-number="9">                    <span class="dt">ri_sd =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/sd">sd</a></span>(residency_index))</a>
<a class="sourceLine" id="cb22-10" data-line-number="10"></a>
<a class="sourceLine" id="cb22-11" data-line-number="11"><span class="co">#sort by decreasing residency_index so that large bubbles don't hide smaller</span></a>
<a class="sourceLine" id="cb22-12" data-line-number="12">ritd_summary &lt;-<span class="st"> </span>ritd_summary[<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/order">order</a></span>(ritd_summary<span class="op">$</span>ri_mean, <span class="dt">decreasing =</span> <span class="ot">TRUE</span>),]</a>
<a class="sourceLine" id="cb22-13" data-line-number="13"></a>
<a class="sourceLine" id="cb22-14" data-line-number="14"><span class="co">#plot; note indexing sp for plot.sp</span></a>
<a class="sourceLine" id="cb22-15" data-line-number="15">sp<span class="op">::</span><span class="kw">plot</span>(greatLakesPoly, <span class="dt">asp =</span> <span class="dv">1</span>, </a>
<a class="sourceLine" id="cb22-16" data-line-number="16">           <span class="dt">xlim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/range">range</a></span>(ritd<span class="op">$</span>mean_longitude),</a>
<a class="sourceLine" id="cb22-17" data-line-number="17">           <span class="dt">ylim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/range">range</a></span>(ritd<span class="op">$</span>mean_latitude),  </a>
<a class="sourceLine" id="cb22-18" data-line-number="18">           <span class="dt">col =</span> <span class="st">"white"</span>, <span class="dt">bg =</span> <span class="st">"grey80"</span>)</a>
<a class="sourceLine" id="cb22-19" data-line-number="19"></a>
<a class="sourceLine" id="cb22-20" data-line-number="20"><span class="co">#make column for symbol color</span></a>
<a class="sourceLine" id="cb22-21" data-line-number="21">ritd_summary<span class="op">$</span>color &lt;-<span class="st"> "red"</span></a>
<a class="sourceLine" id="cb22-22" data-line-number="22">ritd_summary<span class="op">$</span>color[ritd_summary<span class="op">$</span>ri_mean <span class="op">==</span><span class="st"> </span><span class="dv">0</span>] &lt;-<span class="st"> "pink"</span> <span class="co">#sites with no detects</span></a>
<a class="sourceLine" id="cb22-23" data-line-number="23"></a>
<a class="sourceLine" id="cb22-24" data-line-number="24"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/points">points</a></span>(mean_latitude <span class="op">~</span><span class="st"> </span>mean_longitude, <span class="dt">data =</span> ritd_summary, </a>
<a class="sourceLine" id="cb22-25" data-line-number="25">  <span class="dt">pch =</span> <span class="dv">21</span>, <span class="dt">cex =</span> <span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">30</span><span class="op">*</span>ri_mean, <span class="dt">bg =</span> color)</a></code></pre></div>
<p><img src="residence_index_files/figure-html/unnamed-chunk-22-1.png" width="480"></p>
<p>The relatively large points in Saginaw Bay reflect that the total time spanned (not necessarily occupied or detected) at those sites was proportionally larger than others. In other words, fish tended to revisit those sites over long time periods. Keep in mind however, that this could be influenced by other variables, such as the amount of time a fish was at large and alive.</p>

</div>
<div id="aggregate-with-overlap-method" class="section level2">
<h2 class="hasAnchor">
<a href="#aggregate-with-overlap-method" class="anchor"></a>Aggregate With Overlap Method</h2>
<p>The “Aggregate With Overlap” method (<code>calculation_method = "aggregate_with_overlap"</code>) takes the length of time of each detection event and sums them together. A total is returned. The sum for each location is then divided by the sum among all locations to determine the residence index.</p>
<p>Overlapping events at a given location will only exist in detection event data if multiple animals are represented and therefore is only applicable when <code>group_col = NA</code>.</p>
<blockquote>
<p><span class="math inline">\(RI = \frac{AwOS}{AwOT}\)</span></p>
<p><span class="math inline">\(RI\)</span> = Residence Index</p>
<p><span class="math inline">\(AwOS\)</span> = Sum of length of time of each detection at the location</p>
<p><span class="math inline">\(AwOT\)</span> = Sum of length of time of each detection among all locations</p>
</blockquote>
<p>Note that we set <code>group_col = NA</code> for this method.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1">riawo &lt;-<span class="st"> </span>glatos<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/glatos/topics/residence_index">residence_index</a></span>(det_events, <span class="dt">locations =</span> locs, </a>
<a class="sourceLine" id="cb23-2" data-line-number="2">                                <span class="dt">calculation_method =</span> <span class="st">"aggregate_with_overlap"</span>,</a>
<a class="sourceLine" id="cb23-3" data-line-number="3">                                <span class="dt">group_col =</span> <span class="ot">NA</span>)</a>
<a class="sourceLine" id="cb23-4" data-line-number="4"></a>
<a class="sourceLine" id="cb23-5" data-line-number="5"><span class="co">#calculate mean and sd of RI among fish</span></a>
<a class="sourceLine" id="cb23-6" data-line-number="6">riawo_summary &lt;-<span class="st"> </span>riawo <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb23-7" data-line-number="7"><span class="st">               </span><span class="kw">group_by</span>(location, mean_latitude, mean_longitude) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb23-8" data-line-number="8"><span class="st">               </span><span class="kw">summarise</span>(</a>
<a class="sourceLine" id="cb23-9" data-line-number="9">                    <span class="dt">ri_mean =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean</a></span>(residency_index),</a>
<a class="sourceLine" id="cb23-10" data-line-number="10">                    <span class="dt">ri_sd =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/sd">sd</a></span>(residency_index))</a>
<a class="sourceLine" id="cb23-11" data-line-number="11"></a>
<a class="sourceLine" id="cb23-12" data-line-number="12"><span class="co">#sort by decreasing residency_index so that large bubbles don't hide smaller</span></a>
<a class="sourceLine" id="cb23-13" data-line-number="13">riawo_summary &lt;-<span class="st"> </span>riawo_summary[<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/order">order</a></span>(riawo_summary<span class="op">$</span>ri_mean, <span class="dt">decreasing =</span> <span class="ot">TRUE</span>),]</a>
<a class="sourceLine" id="cb23-14" data-line-number="14"></a>
<a class="sourceLine" id="cb23-15" data-line-number="15"><span class="co">#plot; note indexing sp for plot.sp</span></a>
<a class="sourceLine" id="cb23-16" data-line-number="16">sp<span class="op">::</span><span class="kw">plot</span>(greatLakesPoly, <span class="dt">asp =</span> <span class="dv">1</span>, </a>
<a class="sourceLine" id="cb23-17" data-line-number="17">           <span class="dt">xlim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/range">range</a></span>(riawo<span class="op">$</span>mean_longitude),</a>
<a class="sourceLine" id="cb23-18" data-line-number="18">           <span class="dt">ylim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/range">range</a></span>(riawo<span class="op">$</span>mean_latitude),  </a>
<a class="sourceLine" id="cb23-19" data-line-number="19">           <span class="dt">col =</span> <span class="st">"white"</span>, <span class="dt">bg =</span> <span class="st">"grey80"</span>)</a>
<a class="sourceLine" id="cb23-20" data-line-number="20"></a>
<a class="sourceLine" id="cb23-21" data-line-number="21"><span class="co">#make column for symbol color</span></a>
<a class="sourceLine" id="cb23-22" data-line-number="22">riawo_summary<span class="op">$</span>color &lt;-<span class="st"> "red"</span></a>
<a class="sourceLine" id="cb23-23" data-line-number="23">riawo_summary<span class="op">$</span>color[riawo_summary<span class="op">$</span>ri_mean <span class="op">==</span><span class="st"> </span><span class="dv">0</span>] &lt;-<span class="st"> "pink"</span> <span class="co">#sites with no detects</span></a>
<a class="sourceLine" id="cb23-24" data-line-number="24"></a>
<a class="sourceLine" id="cb23-25" data-line-number="25"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/points">points</a></span>(mean_latitude <span class="op">~</span><span class="st"> </span>mean_longitude, <span class="dt">data =</span> riawo_summary, </a>
<a class="sourceLine" id="cb23-26" data-line-number="26">  <span class="dt">pch =</span> <span class="dv">21</span>, <span class="dt">cex =</span> <span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">30</span><span class="op">*</span>ri_mean, <span class="dt">bg =</span> color)</a></code></pre></div>
<p><img src="residence_index_files/figure-html/unnamed-chunk-23-1.png" width="480"></p>

</div>
<div id="aggregate-no-overlap-method" class="section level2">
<h2 class="hasAnchor">
<a href="#aggregate-no-overlap-method" class="anchor"></a>Aggregate No Overlap Method</h2>
<p>The “Aggregate No Overlap” method (<code>calculation_method = "aggregate_no_overlap"</code>) takes the length of time of each detection event and sums them together. However, any overlap in time between one or more detection events is excluded from the sum. For example, if the first detection event spans from <code>2016-01-01 01:02:43</code> to <code>2016-01-01 01:10:12</code> and the second detection event spans from <code>2016-01-01 01:09:01</code> to <code>2016-01-01 01:12:43</code>, then the sum of those two events would be 10 minutes. A total is returned once all events have been added without overlap. The sum for each station is then divided by the sum of the array to determine the residence index.</p>
<p>Overlapping events at a given location will only exist in detection event data if multiple animals are represented and therefore is only applicable when <code>group_col = NA</code>.</p>
<blockquote>
<p><span class="math inline">\(RI = \frac{AnOS}{AnOT}\)</span></p>
<p><span class="math inline">\(RI\)</span> = Residence Index</p>
<p><span class="math inline">\(AnOS\)</span> = Sum of length of time of each location, excluding any overlap</p>
<p><span class="math inline">\(AnOT\)</span> = Sum of length of time among all locations, excluding any overlap</p>
</blockquote>
<p>Note that we set <code>group_col = NA</code> for this method.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1">riano &lt;-<span class="st"> </span>glatos<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/glatos/topics/residence_index">residence_index</a></span>(det_events, <span class="dt">locations =</span> locs, </a>
<a class="sourceLine" id="cb24-2" data-line-number="2">                                <span class="dt">calculation_method =</span> <span class="st">"aggregate_with_overlap"</span>,</a>
<a class="sourceLine" id="cb24-3" data-line-number="3">                                <span class="dt">group_col =</span> <span class="ot">NA</span>)</a>
<a class="sourceLine" id="cb24-4" data-line-number="4"></a>
<a class="sourceLine" id="cb24-5" data-line-number="5"><span class="co">#calculate mean and sd of RI among fish</span></a>
<a class="sourceLine" id="cb24-6" data-line-number="6">riano_summary &lt;-<span class="st"> </span>riano <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb24-7" data-line-number="7"><span class="st">               </span><span class="kw">group_by</span>(location, mean_latitude, mean_longitude) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb24-8" data-line-number="8"><span class="st">               </span><span class="kw">summarise</span>(</a>
<a class="sourceLine" id="cb24-9" data-line-number="9">                    <span class="dt">ri_mean =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean</a></span>(residency_index),</a>
<a class="sourceLine" id="cb24-10" data-line-number="10">                    <span class="dt">ri_sd =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/sd">sd</a></span>(residency_index))</a>
<a class="sourceLine" id="cb24-11" data-line-number="11"></a>
<a class="sourceLine" id="cb24-12" data-line-number="12"><span class="co">#sort by decreasing residency_index so that large bubbles don't hide smaller</span></a>
<a class="sourceLine" id="cb24-13" data-line-number="13">riano_summary &lt;-<span class="st"> </span>riano_summary[<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/order">order</a></span>(riano_summary<span class="op">$</span>ri_mean, <span class="dt">decreasing =</span> <span class="ot">TRUE</span>),]</a>
<a class="sourceLine" id="cb24-14" data-line-number="14"></a>
<a class="sourceLine" id="cb24-15" data-line-number="15"><span class="co">#plot; note indexing sp for plot.sp</span></a>
<a class="sourceLine" id="cb24-16" data-line-number="16">sp<span class="op">::</span><span class="kw">plot</span>(greatLakesPoly, <span class="dt">asp =</span> <span class="dv">1</span>, </a>
<a class="sourceLine" id="cb24-17" data-line-number="17">           <span class="dt">xlim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/range">range</a></span>(riano<span class="op">$</span>mean_longitude),</a>
<a class="sourceLine" id="cb24-18" data-line-number="18">           <span class="dt">ylim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/range">range</a></span>(riano<span class="op">$</span>mean_latitude),  </a>
<a class="sourceLine" id="cb24-19" data-line-number="19">           <span class="dt">col =</span> <span class="st">"white"</span>, <span class="dt">bg =</span> <span class="st">"grey80"</span>)</a>
<a class="sourceLine" id="cb24-20" data-line-number="20"></a>
<a class="sourceLine" id="cb24-21" data-line-number="21"><span class="co">#make column for symbol color</span></a>
<a class="sourceLine" id="cb24-22" data-line-number="22">riano_summary<span class="op">$</span>color &lt;-<span class="st"> "red"</span></a>
<a class="sourceLine" id="cb24-23" data-line-number="23">riano_summary<span class="op">$</span>color[riano_summary<span class="op">$</span>ri_mean <span class="op">==</span><span class="st"> </span><span class="dv">0</span>] &lt;-<span class="st"> "pink"</span> <span class="co">#sites with no detects</span></a>
<a class="sourceLine" id="cb24-24" data-line-number="24"></a>
<a class="sourceLine" id="cb24-25" data-line-number="25"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/points">points</a></span>(mean_latitude <span class="op">~</span><span class="st"> </span>mean_longitude, <span class="dt">data =</span> riano_summary, </a>
<a class="sourceLine" id="cb24-26" data-line-number="26">  <span class="dt">pch =</span> <span class="dv">21</span>, <span class="dt">cex =</span> <span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">30</span><span class="op">*</span>ri_mean, <span class="dt">bg =</span> color)</a></code></pre></div>
<p><img src="residence_index_files/figure-html/unnamed-chunk-24-1.png" width="480"></p>
<p>In this particular data set, there are no overlapping detection events (among fish). Otherwise, these points would appear smaller than the previous example.</p>

</div>
</div>
<div id="plotting-with-plotly" class="section level1">
<h1 class="hasAnchor">
<a href="#plotting-with-plotly" class="anchor"></a>Plotting with Plotly</h1>
<p>Below is the code for plotting the RI using <code>plotly</code>. <code>plotly</code> allows us to interact with the map rather than haveing a static image. More about <code>plotly</code> can be found <a href="https://plot.ly/r/">here</a>. To export figures as image files from <code>plotly</code> you will also need the external command line program <code>orca</code>. To install <code>orca</code>, see <a href="https://github.com/plotly/orca#installation" class="uri">https://github.com/plotly/orca#installation</a>.</p>
<p>Attach the <code>plotly</code> library.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(plotly)</a></code></pre></div>
<p>Set up the map.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1">geo &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(</a>
<a class="sourceLine" id="cb26-2" data-line-number="2">    <span class="dt">scope =</span> <span class="st">'north america'</span>,</a>
<a class="sourceLine" id="cb26-3" data-line-number="3">  <span class="dt">showland =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb26-4" data-line-number="4">  <span class="dt">landcolor =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/plotly/topics/toRGB">toRGB</a></span>(<span class="st">"white"</span>),</a>
<a class="sourceLine" id="cb26-5" data-line-number="5">  <span class="dt">showocean =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb26-6" data-line-number="6">  <span class="dt">oceancolor =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/plotly/topics/toRGB">toRGB</a></span>(<span class="st">"gray"</span>),</a>
<a class="sourceLine" id="cb26-7" data-line-number="7">  <span class="dt">showcountries =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb26-8" data-line-number="8">  <span class="dt">showlakes =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb26-9" data-line-number="9">  <span class="dt">lakecolor =</span> plotly<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/plotly/topics/toRGB">toRGB</a></span>(<span class="st">"gray"</span>),</a>
<a class="sourceLine" id="cb26-10" data-line-number="10">  </a>
<a class="sourceLine" id="cb26-11" data-line-number="11">  <span class="dt">resolution =</span> <span class="dv">50</span>,</a>
<a class="sourceLine" id="cb26-12" data-line-number="12">  <span class="dt">center =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">lat =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/median">median</a></span>(ri<span class="op">$</span>mean_latitude),</a>
<a class="sourceLine" id="cb26-13" data-line-number="13">                <span class="dt">lon =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/median">median</a></span>(ri<span class="op">$</span>mean_longitude)),</a>
<a class="sourceLine" id="cb26-14" data-line-number="14">  <span class="dt">lonaxis =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">range=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Extremes">min</a></span>(ri<span class="op">$</span>mean_longitude)<span class="op">-</span><span class="dv">1</span>, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Extremes">max</a></span>(ri<span class="op">$</span>mean_longitude)<span class="op">+</span><span class="dv">1</span>)),</a>
<a class="sourceLine" id="cb26-15" data-line-number="15">  <span class="dt">lataxis =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">range=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Extremes">min</a></span>(ri<span class="op">$</span>mean_latitude)<span class="op">-</span><span class="dv">1</span>, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Extremes">max</a></span>(ri<span class="op">$</span>mean_latitude)<span class="op">+</span><span class="dv">1</span>))</a>
<a class="sourceLine" id="cb26-16" data-line-number="16">)</a>
<a class="sourceLine" id="cb26-17" data-line-number="17"></a>
<a class="sourceLine" id="cb26-18" data-line-number="18"></a>
<a class="sourceLine" id="cb26-19" data-line-number="19">map &lt;-<span class="st"> </span>ri <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb26-20" data-line-number="20"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/plotly/topics/plot_geo">plot_geo</a></span>(<span class="dt">lat =</span> <span class="op">~</span>mean_latitude, <span class="dt">lon =</span> <span class="op">~</span>mean_longitude, <span class="dt">color =</span> <span class="op">~</span>residency_index )<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-21" data-line-number="21"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/plotly/topics/add_trace">add_markers</a></span>(</a>
<a class="sourceLine" id="cb26-22" data-line-number="22">            <span class="dt">text =</span> <span class="op">~</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste</a></span>(location, <span class="st">': '</span>, residency_index),</a>
<a class="sourceLine" id="cb26-23" data-line-number="23">            <span class="dt">hoverinfo =</span> <span class="st">"text"</span>,</a>
<a class="sourceLine" id="cb26-24" data-line-number="24">    <span class="dt">size =</span> <span class="op">~</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(residency_index <span class="op">*</span><span class="st"> </span><span class="dv">5</span>)</a>
<a class="sourceLine" id="cb26-25" data-line-number="25">  )<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-26" data-line-number="26"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/plotly/topics/layout">layout</a></span>(<span class="dt">title =</span> <span class="st">"Kessel RI"</span>,<span class="dt">geo =</span> geo)</a></code></pre></div>
<p>To show the map you can just type out the variable name.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1">map</a></code></pre></div>
<div id="htmlwidget-bde0ec4a8c7d5297068c" style="width:700px;height:432.632880098888px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-bde0ec4a8c7d5297068c">{"x":{"visdat":{"3d6c1afcd44":["function () ","plotlyVisDat"]},"cur_data":"3d6c1afcd44","attrs":{"3d6c1afcd44":{"lat":{},"lon":{},"color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"scatter","mode":"markers","text":{},"hoverinfo":"text","size":{},"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"mapType":"geo","title":"Kessel RI","geo":{"domain":{"x":[0,1],"y":[0,1]},"scope":"north america","showland":true,"landcolor":"rgba(255,255,255,1)","showocean":true,"oceancolor":"rgba(190,190,190,1)","showcountries":true,"showlakes":true,"lakecolor":"rgba(190,190,190,1)","resolution":50,"center":{"lat":43.3832022222222,"lon":-83.2971627655123},"lonaxis":{"range":[-84.99115,-81.48033]},"lataxis":{"range":[40.5960442029996,46.5010585673123]}},"hovermode":"closest","showlegend":false,"legend":{"yanchor":"top","y":0.5}},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"lat":[45.3412573273863,41.6370842031894,45.5010585673123,41.5960442029996,41.5960442029996,41.62433,44.1345303918273,44.2308242431343,44.9617613616905,43.61133,43.3894244444444,44.451553,42.5738004761905,42.72809,43.37698,44.71315,42.24937,42.09603,42.3470428958333,42.24937,42.09603,42.3470428958333,41.5960442029996,41.6370842031894,42.5738004761905,42.72809,41.62433,42.24937,42.09603,42.3470428958333,45.5010585673123,44.451553,45.3412573273863,44.1345303918273,44.2308242431343,42.5738004761905,42.72809,43.61133,43.37698,44.71315,44.9617613616905,43.3894244444444,45.5010585673123,44.451553,45.3412573273863,41.6370842031894,44.1345303918273,44.2308242431343,43.61133,43.37698,44.71315,44.9617613616905,41.62433,43.3894244444444],"lon":[-83.4463142101412,-82.9741231137922,-83.9048063478928,-83.5848328484993,-83.5848328484993,-83.01284,-83.4421104078763,-83.4103473851096,-83.2935935310245,-83.8705075,-83.9900792592593,-83.300732,-82.5649033333333,-82.48033,-83.99115,-83.2011,-83.11824,-83.1190191666667,-82.9563489166667,-83.11824,-83.1190191666667,-82.9563489166667,-83.5848328484993,-82.9741231137922,-82.5649033333333,-82.48033,-83.01284,-83.11824,-83.1190191666667,-82.9563489166667,-83.9048063478928,-83.300732,-83.4463142101412,-83.4421104078763,-83.4103473851096,-82.5649033333333,-82.48033,-83.8705075,-83.99115,-83.2011,-83.2935935310245,-83.9900792592593,-83.9048063478928,-83.300732,-83.4463142101412,-82.9741231137922,-83.4421104078763,-83.4103473851096,-83.8705075,-83.99115,-83.2011,-83.2935935310245,-83.01284,-83.9900792592593],"type":"scattergeo","mode":"markers","text":["PRS :  0.179487179487179","RAR :  0.179487179487179","FMP :  0.141025641025641","MAU :  0.128205128205128","MAU :  0.102564102564103","TSR :  0.0897435897435897","SBI :  0.0641025641025641","SBO :  0.0641025641025641","THB :  0.0512820512820513","SGR :  0.0384615384615385","TTB :  0.0384615384615385","OSC :  0.0256410256410256","SCL :  0.0256410256410256","SCM :  0.0256410256410256","SHR :  0.0128205128205128","STG :  0.0128205128205128","DRF :  0.0128205128205128","DRL :  0.0128205128205128","DRU :  0.0128205128205128","DRF :  0","DRL :  0","DRU :  0","MAU :  0","RAR :  0","SCL :  0","SCM :  0","TSR :  0","DRF :  0","DRL :  0","DRU :  0","FMP :  0","OSC :  0","PRS :  0","SBI :  0","SBO :  0","SCL :  0","SCM :  0","SGR :  0","SHR :  0","STG :  0","THB :  0","TTB :  0","FMP :  0","OSC :  0","PRS :  0","RAR :  0","SBI :  0","SBO :  0","SGR :  0","SHR :  0","STG :  0","THB :  0","TSR :  0","TTB :  0"],"hoverinfo":["text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text"],"marker":{"colorbar":{"title":"residency_index","ticklen":2},"cmin":0,"cmax":0.179487179487179,"colorscale":[["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0.0714285714285714","rgba(71,28,107,1)"],["0.0714285714285714","rgba(71,28,107,1)"],["0.125","rgba(71,45,122,1)"],["0.142857142857143","rgba(70,50,125,1)"],["0.226190476190476","rgba(62,75,137,1)"],["0.357142857142857","rgba(48,110,142,1)"],["0.541666666666666","rgba(33,154,138,1)"],["0.770833333333333","rgba(106,204,91,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[0.179487179487179,0.179487179487179,0.141025641025641,0.128205128205128,0.102564102564103,0.0897435897435897,0.0641025641025641,0.0641025641025641,0.0512820512820513,0.0384615384615385,0.0384615384615385,0.0256410256410256,0.0256410256410256,0.0256410256410256,0.0128205128205128,0.0128205128205128,0.0128205128205128,0.0128205128205128,0.0128205128205128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"size":[100,100,80.7142857142857,74.2857142857143,61.4285714285714,55,42.1428571428571,42.1428571428571,35.7142857142857,29.2857142857143,29.2857142857143,22.8571428571429,22.8571428571429,22.8571428571429,16.4285714285714,16.4285714285714,16.4285714285714,16.4285714285714,16.4285714285714,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10],"sizemode":"area","line":{"colorbar":{"title":"","ticklen":2},"cmin":0,"cmax":0.179487179487179,"colorscale":[["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0.0714285714285714","rgba(71,28,107,1)"],["0.0714285714285714","rgba(71,28,107,1)"],["0.125","rgba(71,45,122,1)"],["0.142857142857143","rgba(70,50,125,1)"],["0.226190476190476","rgba(62,75,137,1)"],["0.357142857142857","rgba(48,110,142,1)"],["0.541666666666666","rgba(33,154,138,1)"],["0.770833333333333","rgba(106,204,91,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[0.179487179487179,0.179487179487179,0.141025641025641,0.128205128205128,0.102564102564103,0.0897435897435897,0.0641025641025641,0.0641025641025641,0.0512820512820513,0.0384615384615385,0.0384615384615385,0.0256410256410256,0.0256410256410256,0.0256410256410256,0.0128205128205128,0.0128205128205128,0.0128205128205128,0.0128205128205128,0.0128205128205128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},"textfont":{"size":[100,100,80.7142857142857,74.2857142857143,61.4285714285714,55,42.1428571428571,42.1428571428571,35.7142857142857,29.2857142857143,29.2857142857143,22.8571428571429,22.8571428571429,22.8571428571429,16.4285714285714,16.4285714285714,16.4285714285714,16.4285714285714,16.4285714285714,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10]},"geo":"geo","frame":null},{"type":"scattergeo","mode":"markers","opacity":0,"hoverinfo":"none","showlegend":false,"marker":{"colorbar":{"title":"residency_index","ticklen":2,"len":0.5,"lenmode":"fraction","y":1,"yanchor":"top"},"cmin":0,"cmax":0.179487179487179,"colorscale":[["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0.0714285714285714","rgba(71,28,107,1)"],["0.0714285714285714","rgba(71,28,107,1)"],["0.125","rgba(71,45,122,1)"],["0.142857142857143","rgba(70,50,125,1)"],["0.226190476190476","rgba(62,75,137,1)"],["0.357142857142857","rgba(48,110,142,1)"],["0.541666666666666","rgba(33,154,138,1)"],["0.770833333333333","rgba(106,204,91,1)"],["1","rgba(253,231,37,1)"]],"showscale":true,"color":[0,0.179487179487179],"line":{"color":"rgba(255,127,14,1)"}},"lat":[-83.99115,-82.48033],"lon":[41.5960442029996,45.5010585673123],"geo":"geo","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":[]}</script><p>Exporting the map as an image file requires the external program <code>orca</code>, which is called by <code><a href="https://www.rdocumentation.org/packages/plotly/topics/orca">plotly::orca()</a></code>.</p>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p>Kessel, S.T., Hussey, N.E., Crawford, R.E., Yurkowski, D.J., O’Neill, C.V. and Fisk, A.T., 2016. Distinct patterns of Arctic cod (Boreogadus saida) presence and absence in a shallow high Arctic embayment, revealed across open-water and ice-covered periods through acoustic telemetry. Polar Biology, 39(6), pp.1057-1068. <a href="https://www.researchgate.net/publication/279269147" class="uri">https://www.researchgate.net/publication/279269147</a><a href="#fnref1" class="footnote-back">↩</a></p></li>
<li id="fn2"><p>Kessel, S.T., Hussey, N.E., Crawford, R.E., Yurkowski, D.J., O’Neill, C.V. and Fisk, A.T., 2016. Distinct patterns of Arctic cod (Boreogadus saida) presence and absence in a shallow high Arctic embayment, revealed across open-water and ice-covered periods through acoustic telemetry. Polar Biology, 39(6), pp.1057-1068. <a href="https://www.researchgate.net/publication/279269147" class="uri">https://www.researchgate.net/publication/279269147</a><a href="#fnref2" class="footnote-back">↩</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#introduction">Introduction</a><ul class="nav nav-pills nav-stacked">
<li><a href="#function-overview">Function overview</a></li>
      <li><a href="#calculation-methods">Calculation methods</a></li>
      <li><a href="#defining-locations">Defining locations</a></li>
      <li><a href="#other-grouping-variables">Other grouping variables</a></li>
      <li><a href="#accounting-for-groups-in-total-time">Accounting for groups in total time</a></li>
      </ul>
</li>
      <li>
<a href="#examples">Examples</a><ul class="nav nav-pills nav-stacked">
<li><a href="#getting-started">Getting started</a></li>
      <li><a href="#kessel-method">Kessel Method</a></li>
      <li><a href="#time-interval-method">Time Interval Method</a></li>
      <li><a href="#timedelta-method">Timedelta Method</a></li>
      <li><a href="#aggregate-with-overlap-method">Aggregate With Overlap Method</a></li>
      <li><a href="#aggregate-no-overlap-method">Aggregate No Overlap Method</a></li>
      </ul>
</li>
      <li><a href="#plotting-with-plotly">Plotting with Plotly</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Christopher Holbrook, Todd Hayden, Thomas Binder, Jon Pye, Alex Nunes.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
