<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Position Heat Maps — position_heat_map • glatos</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Position Heat Maps — position_heat_map" />

<meta property="og:description" content="Create heat maps to display the spatial distribution of 
 acoustic telemetry positions. Most useful when used on data with high spatial
 resultion, such as VPS positional telemetry data." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">glatos</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/data_loading.html">Data loading methods for the R package glatos</a>
    </li>
    <li>
      <a href="../articles/data_requirements.html">Data requirements of the R package glatos</a>
    </li>
    <li>
      <a href="../articles/receiver_efficiency.html">Receiver Efficiency Index</a>
    </li>
    <li>
      <a href="../articles/residence_index.html">Residence Index</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Position Heat Maps</h1>
    
    <div class="hidden name"><code>position_heat_map.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Create heat maps to display the spatial distribution of 
 acoustic telemetry positions. Most useful when used on data with high spatial
 resultion, such as VPS positional telemetry data.</p>
    
    </div>

    <pre class="usage"><span class='fu'>position_heat_map</span>(<span class='no'>positions</span>, <span class='kw'>projection</span> <span class='kw'>=</span> <span class='st'>"LL"</span>, <span class='kw'>fish_pos_int</span> <span class='kw'>=</span> <span class='st'>"fish"</span>,
  <span class='kw'>abs_or_rel</span> <span class='kw'>=</span> <span class='st'>"absolute"</span>, <span class='kw'>resolution</span> <span class='kw'>=</span> <span class='fl'>10</span>, <span class='kw'>interval</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>x_limits</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>y_limits</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>utm_zone</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>hemisphere</span> <span class='kw'>=</span> <span class='st'>"N"</span>,
  <span class='kw'>legend_gradient</span> <span class='kw'>=</span> <span class='st'>"y"</span>, <span class='kw'>legend_pos</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>0.99</span>, <span class='fl'>0.2</span>, <span class='fl'>1</span>, <span class='fl'>0.8</span>),
  <span class='kw'>output</span> <span class='kw'>=</span> <span class='st'>"plot"</span>, <span class='kw'>folder</span> <span class='kw'>=</span> <span class='st'>"position_heat_map"</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>positions</th>
      <td><p>A dataframe containing detection data with at least the 
following 4 columns:</p><dl class='dl-horizontal'>
 <dt><code>DETECTEDID</code></dt><dd><p>Individual animal identifier; character.</p></dd>
<dt><code>DATETIME</code></dt><dd><p>Date-time stamps for the positions (MUST be of 
  class 'POSIXct')</p></dd>
<dt><code>LAT</code></dt><dd><p>Position latitude.</p></dd>
<dt><code>LON</code></dt><dd><p>Position longitude.</p></dd>
</dl></td>
    </tr>
    <tr>
      <th>projection</th>
      <td><p>A character string indicating the projection of the
positions in the 'positions' dataframe. Used in the call to
<a href='https://www.rdocumentation.org/packages/PBSmapping/topics/convUL'>convUL</a>, which converts coordinates between
latitude/longitude in decimal degrees ("LL"; e.g., 45.98753) and UTM. Valid
arguments are "LL" (latitude/longitude) and "UTM". If projection=="UTM",
then <code>utm_zone</code> and '<code>hemisphere</code> arguments must also be
supplied.</p></td>
    </tr>
    <tr>
      <th>fish_pos_int</th>
      <td><p>A character string indicating whether output will display
number of fish or number of positions occuring in each cell of the grid.
Valid arguments are c("fish", "positions", "intervals"). Default is "fish".
If fish_pos_interval == "intervals", then argument "interval" must be
supplied.</p></td>
    </tr>
    <tr>
      <th>abs_or_rel</th>
      <td><p>A character string indicating whether output will display
values as absolute value (i.e, the actual number of fish, positions, or
intervals) or as relative number (relative to total number of fish
detected). Valid arguments are c("absolute", "relative"). Default is
"absolute".</p></td>
    </tr>
    <tr>
      <th>resolution</th>
      <td><p>A numeric value indicating the spatial resolution 
(in meters) of the grid system used to make the heat maps. Default is 10 m.</p></td>
    </tr>
    <tr>
      <th>interval</th>
      <td><p>A numeric value indicating the duration (in seconds) of time
bin (in seconds) for use in calculating number of intervals fish were
resident in a grid cell (i.e., a surrogate for amount of time spent in each
cell of the grid). If interval==NULL (default), than raw number of
positions is calculated. This value is only used when fish_pos_int ==
"intervals'.</p></td>
    </tr>
    <tr>
      <th>x_limits</th>
      <td><p>An optional 2-element numeric containing limits of x axis. If
x_limits == NULL (default), then it is determined from the extents of the
data.</p></td>
    </tr>
    <tr>
      <th>y_limits</th>
      <td><p>An optional 2-element numeric containing limits of y axis. If 
y_limits == NULL (default), then it is determined from the extents of the
data.</p></td>
    </tr>
    <tr>
      <th>legend_gradient</th>
      <td><p>A character string indicating the orientation of the
color legend; "y" = vertical, "x" = horizontal, "n" indicates that no 
legend should be drawn. Default is "y".</p></td>
    </tr>
    <tr>
      <th>legend_pos</th>
      <td><p>A numeric vector indicating the location of the color 
legend as a portion of the total plot area (i.e., between 0 and 1). Only
used if 'legend_gradient" in not "n". Default is c(0.99, 0.2, 1.0, 0.8),
which puts the legend along the right hand side of the plot.</p></td>
    </tr>
    <tr>
      <th>folder</th>
      <td><p>A character string indicating the output folder. If path is 
not specified then <code>folder</code> will be created in the working directory.
Default is "position_heat_map".</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list object containing 1) a matrix of the calulated values (i.e.,
fish, positions, intervals), with row and column names indicating location of
each grid in UTM, 2) a character string specifying the UTM zone of the data
in the matrix, 3) the bounding box of the data in UTM, 4) and the bounding
box of the data in latitude (Y) and longitude (X), 5) a character string
displaying the function call (i.e., a record of the arguments passed to the
function).</p>
<p>In addition, the user specifies an image output for displaying the
heat map. Options are a "plot" (displayed in R), "png" (png file saved to
specified folder), and "kmz" for viewing the png image as an overlay in
Google Earth (kmz file saved to specified folder).</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>When and 'interval' argument is supplied, the number of unique fish 
x interval combinations that occurred each grid cell is calculated instead of
raw number of positions. For example, in 4 hours there are a total of 4 1-h 
intervals. If fish 'A' was positioned in a single grid cell during 3 of the 
4 intervals, than the number of intervals for that fish and grid combination 
is 3. Intervals are determined by applying the 'findInterval' function 
(base R) to a sequence of timestamps (class: POSIXct) created using 
seq(from = min(positions[, DATETIME]), to = min(positions[, DATETIME]), 
by = interval), where interval is the user-assigned interval duration in 
seconds. Number of intervals is a more robust surrogate than number of 
positions for relative time spent in each grid in cases where spatial or 
temporal variability in positioning probability are likely to significantly 
bias the distribution of positions in the array.</p>
<p>Calculated values (i.e., fish, positions, intervals) can be returned
  as absolute or relative, which is specified using the abs_or_rel argument;
  "absolute" is the actual value, "relative" is the absolute value divided by
  the total number of fish appearing in the 'positions' dataframe. Units for
  plots: fish = number of unique fish (absolute) or <!-- % of total fish in -->
  'positions' dataframe (relative); positions = number of positions
  (absolute) or mean number of positions per fish in 'positions' dataframe
  (relative); intervasls = number of unique fish x interval combinations
  (absolute) or mean number of unique fish x interval combinations per fish
  in 'positions' dataframe (relative).</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/data'>data</a></span>(<span class='no'>lamprey_tracks</span>)
<span class='no'>phm</span> <span class='kw'>&lt;-</span> <span class='fu'>position_heat_map</span>(<span class='no'>lamprey_tracks</span>)</div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>-----------------------------------------------------------</span>
#&gt; <span class='message'>PBS Mapping 2.70.5 -- Copyright (C) 2003-2019 Fisheries and Oceans Canada</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>PBS Mapping comes with ABSOLUTELY NO WARRANTY;</span>
#&gt; <span class='message'>for details see the file COPYING.</span>
#&gt; <span class='message'>This is free software, and you are welcome to redistribute</span>
#&gt; <span class='message'>it under certain conditions, as outlined in the above file.</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>A complete user guide 'PBSmapping-UG.pdf' is located at </span>
#&gt; <span class='message'>C:/Users/cholbrook/Documents/R/win-library/3.5/PBSmapping/doc/PBSmapping-UG.pdf</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>Packaged on 2018-06-05</span>
#&gt; <span class='message'>Pacific Biological Station, Nanaimo</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>All available PBS packages can be found at</span>
#&gt; <span class='message'>https://github.com/pbs-software</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>To see demos, type '.PBSfigs()'.</span>
#&gt; <span class='message'>-----------------------------------------------------------</span>
#&gt; <span class='message'></span></div><div class='output co'>#&gt; <span class='message'>convUL: For the UTM conversion, automatically detected zone 16.</span></div><div class='output co'>#&gt; <span class='message'>convUL: Converting coordinates within the northern hemisphere.</span></div><div class='output co'>#&gt; <span class='message'>convUL: For the UTM conversion, automatically detected zone 16.</span></div><div class='output co'>#&gt; <span class='message'>convUL: Converting coordinates within the northern hemisphere.</span></div><div class='img'><img src='position_heat_map-1.png' alt='' width='700' height='433' /></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    <p>Thomas R. Binder</p>
  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Christopher Holbrook, Todd Hayden, Thomas Binder, Jon Pye, Alex Nunes.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

